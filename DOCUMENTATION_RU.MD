## üìú –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è HyScript
HyScript - —ç—Ç–æ –º–æ—â–Ω—ã–π –¥–≤–∏–∂–æ–∫ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞ JavaScript/TypeScript –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ Hytale. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç 
—Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É, –º–∏–Ω–∏-–∏–≥—Ä—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–ª–≥–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –º–æ–¥–æ–≤

[<img height="20" src="images/english.png" width="35" />](DOCUMENTATION_EN.MD)

### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
–í—Å–µ —Ñ–∞–π–ª—ã —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ –ø–ª–∞–≥–∏–Ω–∞:

scripts/ - –æ—Å–Ω–æ–≤–Ω–∞—è –ø–∞–ø–∫–∞ –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤ (.js –∏–ª–∏ .ts)

sdk/ - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –ø–∞–ø–∫–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è —Ç–∏–ø—ã (main.d.ts). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞—Ö –∫–æ–¥–∞

config.json - —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–ª–∞–≥–∏–Ω–∞

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (config.json)
–í –∫–æ—Ä–Ω–µ –ø–∞–ø–∫–∏ –ø–ª–∞–≥–∏–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫:
```json
{
  "isHotReloadEnabled": true, 
  "typescript": true
}
```
- `isHotReloadEnabled`: –ï—Å–ª–∏ `true`, —Å–∫—Ä–∏–ø—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞)
- `typescript`: –í–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É TypeScript

### üõ† –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

1.–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ Hytale –∏—Å–ø–æ–ª—å–∑—É–π –º–µ—Ç–æ–¥—ã create –∏ createComponent:
```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞
const position = server.create('vector3d', 10, 64, 10);

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
const transform = server.createComponent('transform', position, rotation);
```

2.–†–∞–±–æ—Ç–∞ —Å –∏–≥—Ä–æ–∫–∞–º–∏

–ú–µ—Ç–æ–¥ server.getPlayer(...) –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–±–µ—Ä—Ç–∫—É –Ω–∞–¥ –∏–≥—Ä–æ–∫–æ–º, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–æ—â–∞–µ—Ç –∂–∏–∑–Ω—å:
```typescript
server.on("playerChat", async e => {
    const p = await server.getPlayer({ playerRef: e.sender })
    if(p) {
        p.sendMessage(`–ü—Ä–∏–≤–µ—Ç ${p.getUsername()} –∏–∑ HyScript!`);
        p.sendNotification("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!");
        p.health = 50;
        p.teleport(0, 100, 0);
    }
});
```

### üì¢ –°–æ–±—ã—Ç–∏—è (Events)

–í –±—É–¥—É—â–µ–º –±—É–¥–µ—Ç –µ—â–µ –±–æ–ª—å—à–µ —Å–æ–±—ã—Ç–∏–π

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
```typescript
server.on('playerConnect', (e) => {
    const p = server.getPlayer({ playerRef: e.playerRef });
    p?.sendNotification(`–ü—Ä–∏–≤–µ—Ç, ${p.username}!`);
});

server.on("playerBreakBlock", e => {
    e.player.sendMessage("–ù–µ –ª–æ–º–∞–π!");
    e.isCancelled = true;
});
```

```typescript
const event =
    server.on('playerChat', (e) => {
        if(e.content == "ping") {
            e.sender.sendMessage("pong!");
            e.isCancelled = true; // –æ—Ç–º–µ–Ω–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ–±—â–∏–π —á–∞—Ç
        }
    })
    .key("ping") // –∫–ª—é—á —Å–æ–±—ã—Ç–∏—è
    .priority(EventPriority.LOW); // –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–æ–±—ã—Ç–∏—è

server.removeByKey("ping"); // —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–æ–±—ã—Ç–∏—è —Å –∫–ª—é—á–æ–º "ping"
// –∏–ª–∏
event.remove();
```

### ‚å®Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥

HyScript –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã

```typescript
server.addCommand({
    name: "heal",
    description: "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ",
    args: [
        { name: "target", description: "–ö–æ–≥–æ –ª–µ—á–∏–º", type: "playerRef", required: true }
    ],
    async execute(context, args) {
        const target = await server.getPlayer({ playerRef: args.target });
        target?.heal();
    }
});
```

–ö–æ–º–∞–Ω–¥–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–≥—Ä–æ–∫–∞
```typescript
server.addPlayerCommand({
    name: "spawn",
    async execute(context, args, store, ref, playerRef, world) {
        const p = await server.getPlayer({ playerRef, store, ref, world });
        p?.teleport(0, 64, 0);
    }
});
```

–ö–æ–º–∞–Ω–¥–∞ —Å –ø–æ–¥–∫–æ–º–∞–Ω–¥–∞–º–∏
```typescript
server.addCommandCollection({
    name: "script",
    type: "collection",
    subCommands: {
        "reload": {
            execute(ctx, args) {
                ctx.sendMessage(Message.raw("Reloading..."));
            }
        },
        "info": {
            type: "player",
            execute(ctx, args, store, ref, player, world) {
                player.sendMessage(Message.raw(`World: ${world.getName()}, TPS: ${world.getTps()}`));
            }
        }
    }
});
```

### üß¨ –°–∏—Å—Ç–µ–º–∞ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –°—É—â–Ω–æ—Å—Ç–µ–π (ECS)

Event System
```typescript
server.addEventSystem('entityEvent', BreakBlockEvent, {
    async handle(index, archetypeChunk, store, commandBuffer, event) {
        const player = await server.getPlayer({ index, archetypeChunk, store });
        if(player) {
            player.sendMessage('–≠–π, –Ω–µ –ª–æ–º–∞–π!');
            event.setCancelled(true);
        }
    },
    query() {
        return PlayerRef.getComponentType();
    }
});
```

System
```typescript
server.addSystem('ticking', {
    query() {
        return Query.and(PlayerRef.getComponentType(), ...);
    },
    tick(dt, index, store) {
        // ...
    }
});
```

Component System
```typescript
server.addComponentSystem('refChange', Teleport, {
    query() {
        // –¢–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–∏
        return PlayerRef.getComponentType();
    },
    componentType() {
        return Teleport.getComponentType();
    },
    onComponentRemoved(ref, component, store, commandBuffer) {
    },
    onComponentSet(ref, valueComponent, component, store, commandBuffer) {
    },
    onComponentAdded(ref, component, store, commandBuffer) {
        console.log(component.getPosition());
    }
});
```

```typescript
const player = await server.getPlayer({ playerRef });
player.getComponent(TransformComponent.getComponentType()).setPosition(...) // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

const comp = server.createComponent('teleport', 0, 100, 0)
player.addComponent(Teleport.getComponentType(), comp);
```

–ö–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
```typescript
const customComp = server.createCustomComponent((str: string, lvl: number, xp: number) =>
    return {
        text: test,
        level: lvl,
        xp,
        test: lvl + xp
    }
});

const comp = customComp.create("str", 1, 1.3);
comp.text // "str"
comp.test // 2.3
player.addComponent(customComp.type, comp);
```

### üì• –°–ª—É—à–∞—Ç–µ–ª–∏ –ø–∞–∫–µ—Ç–æ–≤

```typescript
server.addAdapterInbound((packetHandler, packet) => {
    if(packet.getId() == 108) {
        NotificationUtil.sendNotification(packetHandler, '—Ç—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –Ω–∞—á–∞–ª –¥–≤–∏–≥–∞—Ç—å—Å—è!');
    }
});

server.addAdapterOutbound((packetHandler, packet) => {
    if(packet.getId() == 108) {
        NotificationUtil.sendNotification(packetHandler, '—Ç—ã –¥–≤–∏–≥–∞–ª—Å—è!');
    }
});
```

### üñºÔ∏è –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (UI)

–°–∫–æ—Ä–æ...